<!DOCTYPE HTML>
<html lang="ru">
<head>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Задачи</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="./js/functions.js"></script>
<script src="./js/control.js"></script>
<script src="./js/task.js"></script>
</head>
<body>
<div class="container-fluid">
<div class="row">
<div class="col-md-6 col-sm-12">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
	        <ul class="navbar-nav me-auto mb-2 mb-lg-0 flex-column">
        <li class="nav-item">
          <a data-href="index" class="link nav-link text-primary" aria-current="page" href="#">Задачи</a>
        </li>
<li class="nav-item">
          <a data-href="info" class="link nav-link text-primary" aria-current="page">О приложении</a>
        </li>
<li class="nav-item">
          <a data-href="settings" class="link nav-link text-primary" aria-current="page" >Настройки</a>
        </li>
<li class="nav-item">
          <a data-href="sites" class="link nav-link text-primary" aria-current="page" >Мы в социальных сетях</a>
        </li>
<li class="nav-item">
          <a data-href="apps" class="link nav-link text-primary" aria-current="page">Платформы</a>
        </li>
<li class="nav-item">
          <a data-href="contacts" class="link nav-link text-primary" aria-current="page" >Контакты</a>
        </li>



</ul>
</div>
</div>
</nav>

</div>

<div class="col-md-6 col-sm-12 d-flex flex-column" style="height: 100vh;">
<main id="content"></main>

    <div class="p-3" style="background-color: #f8f9fa; width:64%">
<form method="post" id="form">
            <div class="mb-3">
<input id='form_id' type='hidden'>
<input class="form-control w-50" required id='form_text' placeholder="Напишите задачу" type='text' name='text'>
</div>
<button class="btn btn-primary" id='form_save' type='submit'>Добавить</button></button>
<button class="btn btn-primary" id='form_x' type='button' style='display:none'>Закрыть</button>
</form>

</div>
</div>
<script>
document.getElementById("form").onsubmit = function(e) {
e.preventDefault();
let val_id = this[0].value;
if (val_id.length!=0) {
task[val_id].t = this[1].value;
document.querySelectorAll('.task_text[data-id="'+val_id+'"')[0].innerHTML=this[1].value;
sound("click");
document.getElementById("form_x").click();
}
else {
// Добавляем новую задачу.
let new_id = genId();
task[new_id] = {
id: new_id,
t: this[1].value,
s: false,
d: Date.now()
};
taskList();
actionObjectButtons();
document.getElementById("form_x").click();
}
}
document.getElementById("form_x").onclick = function() {
this.style.display = "none";
document.getElementById("form_text").value="";
document.getElementById("form_save").innerHTML="Добавить";
document.getElementById("form_id").value="";
sound("click");
}
</script>


</div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>